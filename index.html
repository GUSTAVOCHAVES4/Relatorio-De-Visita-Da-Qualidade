<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Visita da Qualidade</title>
    
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

    <header>
        <h1>RELATÓRIO DE VISITA DA QUALIDADE</h1>
    </header>

    <div class="visit-details-container">
    <h2>Informações da Visita</h2>
    <div class="details-form">
        <div class="form-group">
            <label for="visit-local">Local:</label>
            <input type="text" id="visit-local" placeholder="Ex: UTI 10º Andar e Empresa Contratada">
        </div>
        <div class="form-group">
            <label for="visit-date">Data:</label>
            <input type="date" id="visit-date">
        </div>
        <div class="form-group">
            <label for="visit-time">Horário:</label>
            <input type="time" id="visit-time">
            </div>
        </div>
    </div>
        
   <main>
    <div class="content-wrapper">
        <section class="controls">
            <label for="responsible-select">Filtrar por Responsável:</label>
            <select id="responsible-select">
                <option value="">-- Selecione um responsável --</option>
                <!-- Lista é preenchida pelo JavaScript -->
            </select>
            <button id="clear-search-btn" title="Limpar pesquisa">X</button>
        </section>

        <section class="image-upload-section">
    <h3>Anexar Fotos de Evidência</h3>
    <button type="button" id="open-evidence-camera-btn" class="camera-btn">Tirar Foto (Câmera)</button>
    <div id="image-preview-container" title="Pré-visualização das imagens selecionadas"></div>
        </section>

        <section class="meeting-details-section">
    <h3>Detalhes da Reunião</h3>
    <div class="meeting-form">
        <div class="form-group full-width">
            <label for="meeting-participants">Participantes:</label>
            <textarea id="meeting-participants" rows="3" placeholder="Liste os nomes dos participantes separados por vírgula. Ex: Enf. Gerson, Dr. Caio..."></textarea>
        </div>

        <div class="form-group full-width">
    <label for="group-photo-upload">Foto da Equipe:</label>
    <button type="button" id="open-group-camera-btn" class="camera-btn">Tirar Foto da Equipe (Câmera)</button>
    <div id="group-photo-preview" class="group-photo-preview-container"></div>
    </div>
        <h4>Próxima Visita</h4>
        <div class="form-group">
            <label for="next-visit-date">Data:</label>
            <input type="date" id="next-visit-date">
        </div>
        <div class="form-group">
            <label for="next-visit-time">Horário:</label>
            <input type="time" id="next-visit-time">
        </div>
        <div class="form-group">
            <label for="next-visit-local">Setor:</label>
            <input type="text" id="next-visit-local" placeholder="Ex: Centro Cirúrgico">
            </div>
        </div>
        </section>

        <section class="visit-observations-section">
    <h3>Observações da Visita</h3>
    <div class="form-group full-width">
        <label for="visit-observations-textarea">Digite aqui as observações, usando "Enter" para separar os itens da lista:</label>
        <textarea id="visit-observations-textarea" rows="8" placeholder="Ex: Telas com buracos..."></textarea>
        </div>
        </section>

<section class="action-plan-section">
    <h3>Sugestões da APEQ: "Dando um passo adiante" (Plano de Ação)</h3>
    <table id="action-plan-table">
        <thead>
            <tr>
                <th>Ação</th>
                <th>Responsável</th>
                <th>Setor</th>
                <th>Prazo para Finalização</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Nos gráficos da unidade, fazer comparativos com outro hospital e colocar metas.</td>
                <td><input type="text" placeholder="Nome do responsável..."></td>
                <td><input type="text" placeholder="Setor responsável..."></td>
                <td><input type="text" placeholder="Prazo..."></td>
            </tr>
            <tr>
                <td>Elaborar o Mapeamento dos Processos (processos principais).</td>
                <td><input type="text" placeholder="Nome do responsável..."></td>
                <td><input type="text" placeholder="Setor responsável..."></td>
                <td><input type="text" placeholder="Prazo..."></td>
            </tr>
             <tr>
                <td>Fazer Gestão de Riscos (ex: falta de materiais, o que fazer?).</td>
                <td><input type="text" placeholder="Nome do responsável..."></td>
                <td><input type="text" placeholder="Setor responsável..."></td>
                <td><input type="text" placeholder="Prazo..."></td>
            </tr>
        </tbody>
    </table>
</section>

        <form id="evaluation-form">
            <section class="table-container">
                <h2>Itens de Ação</h2>
                <table id="action-items-table">
                    <thead>
                        <tr>
                            <th>Responsável</th>
                            <th>Seção</th>
                            <th>Tema</th>
                            <th>Item</th>
                            <th>Descrição do Item</th>
                            <th>Subitem</th>
                            <th>Descrição do Subitem</th>
                            <th>Nível de Exigência</th>
                            <th>Avaliação</th>
                            <th>Evidências</th>
                            <th>Propostas</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </section>
            
            <button type="submit" id="generate-minutes-btn">Gerar Ata</button>
        </form>

        <section id="minutes-output" class="minutes-output"></section>
    </div>
</main>

    <script src="assets/js/libs/jspdf.min.js"></script>
    <script src="assets/js/libs/jspdf-autotable.min.js"></script>
    <script src="assets/js/libs/html2canvas.min.js"></script>
    <script src="assets/js/script.js"></script>

<div id="camera-modal" class="camera-modal">
    <div class="camera-modal-content">
        <h2>Capturar Imagem</h2>
        <video id="camera-feed" autoplay playsinline></video>
        <canvas id="camera-snapshot" style="display: none;"></canvas>

        <!-- "Tira de Filme" para multi-fotos -->
        <div id="film-strip-container"></div>

        <div class="camera-controls">
            <button type="button" id="flip-camera-btn" style="display: none;">Virar Câmera</button>
            <button type="button" id="capture-btn">Tirar Foto</button>
            <button type="button" id="use-single-photo-btn" style="display: none;">Usar esta Foto</button>
            <button type="button" id="retake-single-photo-btn" style="display: none;">Tirar Novamente</button>
            <button type="button" id="done-multi-shot-btn" style="display: none;">Concluir e Anexar</button>
            <button type="button" id="close-modal-btn">Cancelar</button>
        </div>
    </div>
</div>

</body>
</html>